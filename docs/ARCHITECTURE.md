# OpenManus Java æ¶æ„æ–‡æ¡£

## ğŸŒ ç³»ç»Ÿæ¦‚è§ˆ

OpenManus Java æ˜¯ä¸€ä¸ªåŸºäº Spring Boot å’Œ LangChain4j çš„æ™ºèƒ½ä»£ç†ç³»ç»Ÿï¼Œé‡‡ç”¨ ReAct æ¨ç†æ¡†æ¶å’Œ Chain of Thought å±•ç¤ºã€‚

### æ ¸å¿ƒç‰¹æ€§

- **ReAct æ¨ç†**: åŸºäºæ¨ç†å’Œè¡ŒåŠ¨çš„æ™ºèƒ½å¯¹è¯
- **Chain of Thought**: å®Œæ•´çš„æ¨ç†è¿‡ç¨‹å±•ç¤º
- **å·¥å…·è°ƒç”¨**: æ”¯æŒ Pythonã€æ–‡ä»¶æ“ä½œã€ç½‘é¡µæµè§ˆç­‰
- **ä»»åŠ¡åæ€**: è‡ªåŠ¨ä»»åŠ¡åæ€å’Œæ€»ç»“
- **Web ç•Œé¢**: ç°ä»£åŒ–çš„è‹¹æœé£æ ¼ UI

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯
- **Java 17+** - è¿è¡Œç¯å¢ƒ
- **Spring Boot 3.2.0** - åº”ç”¨æ¡†æ¶
- **LangChain4j** - AI æœåŠ¡å’Œå·¥å…·æ¡†æ¶
- **LangGraph4j 1.6.0-beta5** - çŠ¶æ€å›¾å·¥ä½œæµå¼•æ“ï¼Œæä¾›å¼ºå¤§çš„AgentçŠ¶æ€ç®¡ç†å’Œå·¥ä½œæµç¼–æ’èƒ½åŠ›
- **Docker** - æ²™ç®±ç¯å¢ƒ

### å‰ç«¯  
- **Vue.js 3** - å‰ç«¯æ¡†æ¶
- **Element Plus** - UIç»„ä»¶åº“
- **WebSocket** - å®æ—¶é€šä¿¡

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å®¢æˆ·ç«¯å±‚                            â”‚
â”‚  Webç•Œé¢ (Vue.js + Element Plus)  |  å‘½ä»¤è¡Œ (CLI)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     WebæœåŠ¡å±‚                          â”‚
â”‚  REST API  |  WebSocket Handler  |  é™æ€èµ„æºæœåŠ¡      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Agentå±‚                            â”‚
â”‚  ManusAgent (åŸºäº AI Services)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     å·¥å…·å±‚                              â”‚
â”‚  PythonTool  |  FileTool  |  BrowserTool  |  å…¶ä»–å·¥å…·  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LLMå±‚                              â”‚
â”‚  OpenAI  |  Qwen  |  Anthropic  |  å…¶ä»–LLM            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¤– Agent å·¥ä½œæµ

### StateGraphæ¶æ„

OpenManus Javaç°åœ¨ä½¿ç”¨LangGraph4jçš„StateGraphæ¶æ„æ¥ç®¡ç†Agentçš„çŠ¶æ€å’Œå·¥ä½œæµï¼š

```
ç”¨æˆ·è¾“å…¥ â†’ StateGraphèŠ‚ç‚¹å¤„ç† â†’ çŠ¶æ€æ›´æ–° â†’ æ¡ä»¶è·¯ç”± â†’ å·¥å…·æ‰§è¡Œ â†’ çŠ¶æ€åˆå¹¶ â†’ æœ€ç»ˆè¾“å‡º
```

#### æ ¸å¿ƒç»„ä»¶

1. **StateGraph**: å®šä¹‰Agentçš„çŠ¶æ€è½¬æ¢å›¾
2. **AgentState**: ç®¡ç†å¯¹è¯çŠ¶æ€ã€æ¶ˆæ¯å†å²å’Œå·¥å…·è°ƒç”¨ç»“æœ
3. **èŠ‚ç‚¹å¤„ç†å™¨**: å¤„ç†ä¸åŒç±»å‹çš„ä»»åŠ¡ï¼ˆæ€è€ƒã€å·¥å…·è°ƒç”¨ã€å“åº”ç”Ÿæˆï¼‰
4. **æ¡ä»¶è·¯ç”±**: æ ¹æ®çŠ¶æ€åŠ¨æ€å†³å®šä¸‹ä¸€ä¸ªæ‰§è¡ŒèŠ‚ç‚¹
5. **çŠ¶æ€åˆå¹¶**: å°†å·¥å…·æ‰§è¡Œç»“æœåˆå¹¶åˆ°AgentçŠ¶æ€ä¸­

### ReAct æ¨ç†æµç¨‹

åŸºäºStateGraphçš„ReActæ¨ç†æµç¨‹ï¼š

```
ç”¨æˆ·è¾“å…¥ â†’ æ€è€ƒèŠ‚ç‚¹ â†’ è¡ŒåŠ¨èŠ‚ç‚¹ â†’ è§‚å¯ŸèŠ‚ç‚¹ â†’ æ¡ä»¶åˆ¤æ–­ â†’ å¾ªç¯æˆ–ç»“æŸ
```

1. **æ€è€ƒèŠ‚ç‚¹**: Agentåˆ†æå½“å‰çŠ¶æ€ï¼Œå†³å®šä¸‹ä¸€æ­¥è¡ŒåŠ¨
2. **è¡ŒåŠ¨èŠ‚ç‚¹**: æ‰§è¡Œå…·ä½“çš„å·¥å…·è°ƒç”¨æˆ–ç”Ÿæˆå›ç­”
3. **è§‚å¯ŸèŠ‚ç‚¹**: åˆ†æå·¥å…·æ‰§è¡Œç»“æœå¹¶æ›´æ–°çŠ¶æ€
4. **æ¡ä»¶åˆ¤æ–­**: æ ¹æ®çŠ¶æ€å†³å®šæ˜¯å¦ç»§ç»­å¾ªç¯æˆ–ç»“æŸ

### å·¥å…·è°ƒç”¨æµç¨‹
1. ç”¨æˆ·è¾“å…¥ â†’ ManusAgent
2. StateGraph åˆ†æçŠ¶æ€ï¼Œå†³å®šå·¥å…·è°ƒç”¨
3. æ‰§è¡Œç›¸åº”å·¥å…· (Pythonã€æ–‡ä»¶ã€ç½‘é¡µç­‰)
4. æ”¶é›†å·¥å…·ç»“æœï¼Œæ›´æ–°çŠ¶æ€ï¼Œç»§ç»­æ¨ç†æˆ–ç»™å‡ºç­”æ¡ˆ
5. è¿”å›å®Œæ•´çš„æ¨ç†è¿‡ç¨‹

## ğŸŒ Web åŠŸèƒ½

### API ç«¯ç‚¹
- `GET /api/v1/agent/health` - å¥åº·æ£€æŸ¥
- `POST /api/v1/agent/chat` - èŠå¤©æ¥å£
- `WebSocket /ws/agent` - å®æ—¶é€šä¿¡

### å‰ç«¯åŠŸèƒ½
- **èŠå¤©ç•Œé¢** - å®æ—¶å¯¹è¯äº¤äº’
- **æ¨ç†è¿‡ç¨‹å±•ç¤º** - å·¦å³åˆ†æ å¸ƒå±€
- **é•¿å›ç­”æŠ˜å ** - æ™ºèƒ½å¤„ç†é•¿ç¯‡å›ç­”
- **å“åº”å¼è®¾è®¡** - é€‚é…ä¸åŒå±å¹•å°ºå¯¸

## ğŸ”§ æ ¸å¿ƒç»„ä»¶

### ManusAgent
åŸºäº LangGraph4j StateGraph çš„æ™ºèƒ½ Agentï¼š

```java
@Component
public class ManusAgent {
    private final StateGraph<AgentState> stateGraph;
    
    public ManusAgent(ChatModel chatModel, List<Tool> tools) {
        this.stateGraph = StateGraph.builder(AgentState.class)
            .addNode("think", this::thinkNode)
            .addNode("act", this::actNode)
            .addNode("observe", this::observeNode)
            .addConditionalEdges("think", this::shouldContinue)
            .setEntryPoint("think")
            .build();
    }
}
```

#### StateGraphå·¥ä½œæµ

- **èŠ‚ç‚¹å®šä¹‰**: å®šä¹‰æ€è€ƒã€å·¥å…·è°ƒç”¨ã€å“åº”ç­‰å¤„ç†èŠ‚ç‚¹
- **çŠ¶æ€è½¬æ¢**: ç®¡ç†Agentåœ¨ä¸åŒçŠ¶æ€é—´çš„è½¬æ¢
- **æ¡ä»¶è·¯ç”±**: æ ¹æ®æ‰§è¡Œç»“æœåŠ¨æ€é€‰æ‹©ä¸‹ä¸€ä¸ªèŠ‚ç‚¹
- **å¹¶è¡Œå¤„ç†**: æ”¯æŒå¤šä¸ªå·¥å…·çš„å¹¶è¡Œæ‰§è¡Œ
- **é”™è¯¯å¤„ç†**: å†…ç½®é”™è¯¯æ¢å¤å’Œé‡è¯•æœºåˆ¶

### å·¥å…·ç³»ç»Ÿ
æ‰€æœ‰å·¥å…·ä½¿ç”¨æ ‡å‡†çš„ @Tool æ³¨è§£ï¼š

```java
public static class ToolProvider {
    @Tool("Execute Python code for calculations")
    public String executePython(String code) {
        return pythonTool.executePython(code);
    }
    
    @Tool("List files and directories")
    public String listDirectory(String path) {
        return fileTool.listDirectory(path);
    }
}
```

### æ”¯æŒçš„å·¥å…·
- **PythonTool**: æ‰§è¡Œ Python ä»£ç 
- **FileTool**: æ–‡ä»¶æ“ä½œ (è¯»å–ã€å†™å…¥ã€åˆ—è¡¨)
- **BrowserTool**: ç½‘é¡µæµè§ˆ
- **WebSearchTool**: ç½‘ç»œæœç´¢
- **BashTool**: Bash å‘½ä»¤æ‰§è¡Œ
- **AskHumanTool**: äººæœºäº¤äº’
- **TerminateTool**: ä»»åŠ¡ç»ˆæ­¢
- **ReflectionTool**: ä»»åŠ¡åæ€

## ğŸš€ å¯åŠ¨æ¨¡å¼

### Webæ¨¡å¼ (é»˜è®¤)
```bash
mvn spring-boot:run
```
å¯åŠ¨WebæœåŠ¡å™¨ï¼Œæä¾›Webç•Œé¢å’ŒAPIæœåŠ¡ã€‚

### å‘½ä»¤è¡Œæ¨¡å¼
```bash
mvn spring-boot:run -Dspring-boot.run.arguments=--cli
```
å¯åŠ¨ä¼ ç»Ÿçš„å‘½ä»¤è¡Œäº¤äº’ç•Œé¢ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
src/main/java/com/openmanus/java/
â”œâ”€â”€ agent/
â”‚   â””â”€â”€ ManusAgent.java          # æ™ºèƒ½ Agent å®ç°
â”œâ”€â”€ tool/
â”‚   â”œâ”€â”€ PythonTool.java          # Python æ‰§è¡Œå·¥å…·
â”‚   â”œâ”€â”€ FileTool.java            # æ–‡ä»¶æ“ä½œå·¥å…·
â”‚   â”œâ”€â”€ BrowserTool.java         # ç½‘é¡µè®¿é—®å·¥å…·
â”‚   â”œâ”€â”€ WebSearchTool.java       # ç½‘ç»œæœç´¢å·¥å…·
â”‚   â”œâ”€â”€ BashTool.java            # Bash å‘½ä»¤å·¥å…·
â”‚   â”œâ”€â”€ AskHumanTool.java        # äººæœºäº¤äº’å·¥å…·
â”‚   â”œâ”€â”€ TerminateTool.java       # ä»»åŠ¡ç»ˆæ­¢å·¥å…·
â”‚   â””â”€â”€ ReflectionTool.java      # ä»»åŠ¡åæ€å·¥å…·
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ LlmConfig.java           # LLM é…ç½®
â”‚   â””â”€â”€ VectorDatabaseConfig.java # å‘é‡æ•°æ®åº“é…ç½®
â”œâ”€â”€ controller/
â”‚   â””â”€â”€ AgentController.java     # REST API æ§åˆ¶å™¨
â”œâ”€â”€ llm/
â”‚   â””â”€â”€ LlmClient.java           # LLM å®¢æˆ·ç«¯
â”œâ”€â”€ memory/
â”‚   â”œâ”€â”€ ConversationBuffer.java  # å¯¹è¯ç¼“å†²
â”‚   â””â”€â”€ MemoryTool.java          # å†…å­˜å·¥å…·
â”œâ”€â”€ model/
â”‚   â”œâ”€â”€ Memory.java              # å†…å­˜æ¨¡å‹
â”‚   â”œâ”€â”€ CLIResult.java           # å‘½ä»¤è¡Œç»“æœ
â”‚   â”œâ”€â”€ Message.java             # æ¶ˆæ¯æ¨¡å‹
â”‚   â””â”€â”€ Role.java                # è§’è‰²æšä¸¾
â””â”€â”€ WebApplication.java          # Spring Boot å¯åŠ¨ç±»
```

## ğŸ”’ å®‰å…¨è®¾è®¡

- **æ²™ç®±éš”ç¦»**: Dockerå®¹å™¨éš”ç¦»ä»£ç æ‰§è¡Œ
- **è¾“å…¥éªŒè¯**: ä¸¥æ ¼çš„å‚æ•°æ ¡éªŒ
- **èµ„æºé™åˆ¶**: é˜²æ­¢èµ„æºæ»¥ç”¨
- **å·¥å…·æƒé™**: ç»†ç²’åº¦çš„å·¥å…·è®¿é—®æ§åˆ¶

## ğŸ“Š ç›‘æ§æŒ‡æ ‡

- **AgentçŠ¶æ€**: å®æ—¶æ¨ç†è¿‡ç¨‹å±•ç¤º
- **å·¥å…·è°ƒç”¨**: å·¥å…·æ‰§è¡ŒçŠ¶æ€å’Œè€—æ—¶
- **ç³»ç»Ÿå¥åº·**: Spring Boot Actuatorç›‘æ§
- **WebSocketè¿æ¥**: è¿æ¥çŠ¶æ€å’Œæ¶ˆæ¯ç»Ÿè®¡

## ğŸ¯ è®¾è®¡åŸåˆ™

### ç®€åŒ–è®¾è®¡
- **æ— è‡ªå®šä¹‰åŸºç±»**: ç›´æ¥ä½¿ç”¨ LangChain4j çš„å®˜æ–¹å®ç°
- **AI Services**: ä½¿ç”¨ LangChain4j çš„ AI Services æ¡†æ¶
- **å·¥å…·ç»Ÿä¸€**: æ‰€æœ‰å·¥å…·ä½¿ç”¨ @Tool æ³¨è§£

### æ˜“æ‰©å±•æ€§
- **å·¥å…·å³æ’å³ç”¨**: æ–°å¢å·¥å…·åªéœ€å®ç° @Tool æ³¨è§£
- **LLM æ”¯æŒ**: æ”¯æŒå¤šç§ LLM æä¾›å•†
- **é…ç½®çµæ´»**: é€šè¿‡é…ç½®æ–‡ä»¶è½»æ¾åˆ‡æ¢ç»„ä»¶

### æ ‡å‡†åŒ–
- **å®Œå…¨å¯¹é½å®˜æ–¹ç”Ÿæ€**: ä½¿ç”¨ LangChain4j çš„æ ‡å‡†æ¨¡å¼
- **æŒç»­äº«å—ç”Ÿæ€å‡çº§**: å®˜æ–¹æ–°åŠŸèƒ½è‡ªåŠ¨å¯ç”¨
- **ç¤¾åŒºå…¼å®¹æ€§**: ä¸ LangChain4j ç”Ÿæ€å®Œå…¨å…¼å®¹